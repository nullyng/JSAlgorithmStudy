# 문제 개요

문제: [줄 서는 방법](https://school.programmers.co.kr/learn/courses/30/lessons/12936)

분류: 연습문제

난이도: Lv.2

# 문제 풀이

처음에는 모든 순열을 구한 후 `k`번째에 해당하는 순열을 반환했는데 `k`의 최댓값이 20!이라 모든 테스트를 통과하지 못했다.
따라서 다른 사람들의 풀이 방법을 참고하여 **가장 첫 번째 자리부터 차례대로 구하는 방법**으로 문제를 풀이했다.

그러기 위해서는 먼저 `n`명이 차례대로 줄을 서는 경우를 `arr`에 저장하고, `n!`을 구해놓아야 한다. 또한 `k`를 1만큼 감소시킨 후 아래 과정을 반복한다.(배열은 0번째부터 시작하므로 `k-1`번째에 해당하는 방법을 찾아야 하기 때문에)

예를 들어 `n`이 3, 즉 3명이 줄을 서있을 때
각 사람이 가장 앞에 서는 경우의 수는 각각 2개(`(n-1!)`)씩 존재한다.

- [**1**, 2, 3] ← 1이 가장 앞에 존재하는 경우
- [**1**, 3, 2] ← 1이 가장 앞에 존재하는 경우
- [**2**, 1, 3] ← 2가 가장 앞에 존재하는 경우
- [**2**, 3, 1] ← 2가 가장 앞에 존재하는 경우
- [**3**, 1, 2] ← 3이 가장 앞에 존재하는 경우
- [**3**, 2, 1] ← 3이 가장 앞에 존재하는 경우

여기서 3번째(`k`=3) 방법 [2, 1, 3]을 구한다고 해보자.

우선 가장 첫 번째 자리에 몇 번이 와야하는지 구해야 하는데, 앞서 말했듯 각 사람이 가장 앞에 서는 경우의 수는 2개(`(n-1)!`)씩 존재한다.
따라서 현재 `k`(`k-1`을 한 값인 2)가 2개씩 묶인 것((123, 132), (213, 231), (312, 321)) 중 어디에 속하는지 구하려면 `k`에서 `(n-1)!`을 나눠야 한다.
여기서 나온 몫에 해당하는 인덱스를 `arr`에서 찾은 것이 현재 자리에 와야하는 사람의 번호이다.

- k / (n-1)! = 2 / 2 = 1

이는 `k`가 2개씩 묶인 3가지((123, 132), (213, 231), (312, 321)) 중 1번째에 해당한다는 것을 의미한다.
따라서 현재 `arr` [1, 2, 3] 중 1번째 인덱스에 해당하는 2번이 가장 앞에 와야한다.

이후 `k`에는 `k`에서 `(n-1)!`을 mod 연산한 값을 저장한다.

- k = k % (n-1)! = 2 % 2 = 0

이는 2개(213, 231) 중 0번째에 해당한다는 것을 의미한다.
따라서 다음에는 2를 제외한 1개씩 묶인 것 2가지(13, 31)를 대상으로 위 과정을 반복한다.

한 과정을 마칠 때마다 그 과정에서 줄 세운 사람을 정답 배열에 추가함과 동시에 `arr`에서 제외하고, `n`을 1만큼 감소시켜야한다.

말로 설명하려니까 쉽지 않은데…😵‍💫 그림으로 그려보면 아래와 같다.
